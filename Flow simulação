Peguei as coordenadas da UFABC em SBC, Santo André e USP para realização da simulação. No site do openWeather.

[{"id":"c25b4bea.e6a958","type":"tab","label":"Flow 1","disabled":false,"info":""},{"id":"71a09c7.42614e4","type":"tab","label":"CLIMA AgoraV2_1","disabled":false,"info":""},{"id":"a5b0e0d9.2fe19","type":"tab","label":"UL","disabled":false,"info":""},{"id":"84c54e5e.9b6cc8","type":"tab","label":"JSON","disabled":false,"info":""},{"id":"c106f64e.44bdf8","type":"mqtt-broker","z":"","name":"","broker":"mqtt.eclipse.org","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"559190d8.c88118","type":"mqtt-broker","z":"","name":"","broker":"mqtt.eclipse.org","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"927a8fe0.86ce9","type":"google-cloud-credentials","z":"","name":"site-renatobdo-9fe4ab8d98d5.json"},{"id":"553e4f2a.d90218","type":"mqtt-broker","z":"","name":"mosquitto","broker":"177.104.61.27","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"bf90292e.f7ffb","type":"inject","z":"71a09c7.42614e4","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":"3","topic":"","payload":"","payloadType":"date","x":100,"y":60,"wires":[["ded5ff4f.c65df"]]},{"id":"7eca7a5b.fb2694","type":"http request","z":"71a09c7.42614e4","name":"Temperatura UFABC-SBC","method":"GET","ret":"txt","paytoqs":"ignore","url":"http://api.openweathermap.org/data/2.5/weather?lat=-23.676992&lon=-46.563269&appid=c7f8bc1d2e8a77746581de0ac142c8b3&units=metric","tls":"","persist":false,"proxy":"","authType":"","x":390,"y":40,"wires":[["2740e706.e7231","837a2fe4.a16a8"]]},{"id":"2740e706.e7231","type":"json","z":"71a09c7.42614e4","name":"","property":"payload","action":"","pretty":false,"x":590,"y":100,"wires":[["4e7c0a0f.81e84c","f42113c4.aeedd"]]},{"id":"f42113c4.aeedd","type":"debug","z":"71a09c7.42614e4","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":770,"y":60,"wires":[]},{"id":"4e7c0a0f.81e84c","type":"change","z":"71a09c7.42614e4","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.main.temp","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":180,"wires":[["fd6637dd.b7d5","dfdd00ff.2d9308"]]},{"id":"fd6637dd.b7d5","type":"debug","z":"71a09c7.42614e4","name":"payload da mensagem","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":940,"y":120,"wires":[]},{"id":"dfdd00ff.2d9308","type":"template","z":"71a09c7.42614e4","name":"payload UL com |","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"4t|{{payload}}","output":"str","x":930,"y":180,"wires":[["e02cbf9f.92db9","6d0fadf9.e9085c"]]},{"id":"e02cbf9f.92db9","type":"debug","z":"71a09c7.42614e4","name":"broker 177_","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":1170,"y":220,"wires":[]},{"id":"b9b4dc62.7f149","type":"http request","z":"71a09c7.42614e4","name":"Temperatura USP","method":"GET","ret":"txt","paytoqs":"ignore","url":"http://api.openweathermap.org/data/2.5/weather?lat=-23.560420&lon=-46.731370&appid=c7f8bc1d2e8a77746581de0ac142c8b3&units=metric&mode=xml","tls":"","persist":false,"proxy":"","authType":"","x":370,"y":160,"wires":[["4720d215.ea51cc"]]},{"id":"837a2fe4.a16a8","type":"debug","z":"71a09c7.42614e4","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":610,"y":20,"wires":[]},{"id":"62c9026e.bfa50c","type":"debug","z":"71a09c7.42614e4","name":"temperaturaMinXML","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload.current.temperature[0].$.min","targetType":"msg","statusVal":"","statusType":"auto","x":640,"y":380,"wires":[]},{"id":"4720d215.ea51cc","type":"xml","z":"71a09c7.42614e4","name":"","property":"payload","attr":"","chr":"","x":410,"y":300,"wires":[["62c9026e.bfa50c","191d904a.6ade98","345a926b.631ca6"]]},{"id":"6a57073a.1ee968","type":"template","z":"71a09c7.42614e4","name":"Payload em XML","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"1<measure device=\"dht22\" key=\"4jggokgpepnvsb2uv4s40d59ov\"><t value=\"{{payload}}\" />","output":"str","x":870,"y":300,"wires":[["47f9103b.5a464","8ec04024.2ad7"]]},{"id":"191d904a.6ade98","type":"change","z":"71a09c7.42614e4","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.current.temperature[0].$.value","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":620,"y":300,"wires":[["6a57073a.1ee968"]]},{"id":"47f9103b.5a464","type":"debug","z":"71a09c7.42614e4","name":"Payload XML customizado","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":1180,"y":360,"wires":[]},{"id":"345a926b.631ca6","type":"debug","z":"71a09c7.42614e4","name":"Payload xml completo","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":660,"y":240,"wires":[]},{"id":"8ec04024.2ad7","type":"mqtt out","z":"71a09c7.42614e4","name":"","topic":"iotamanager","qos":"0","retain":"false","broker":"553e4f2a.d90218","x":1130,"y":260,"wires":[]},{"id":"6d0fadf9.e9085c","type":"mqtt out","z":"71a09c7.42614e4","name":"","topic":"iotamanager","qos":"0","retain":"false","broker":"553e4f2a.d90218","x":1170,"y":160,"wires":[]},{"id":"ded5ff4f.c65df","type":"random","z":"71a09c7.42614e4","name":"","outputs":5,"scope":"msg","x":140,"y":220,"wires":[["7eca7a5b.fb2694"],["b9b4dc62.7f149"],["e88c0dbe.2a1d1"],["37c7f17a.dc52fe"],["d259858a.6f98e"]]},{"id":"37c7f17a.dc52fe","type":"http request","z":"71a09c7.42614e4","name":"Temperatura UFABC-SA","method":"GET","ret":"txt","paytoqs":"ignore","url":"http://api.openweathermap.org/data/2.5/weather?lat=-23.646310&lon=-46.527720&appid=c7f8bc1d2e8a77746581de0ac142c8b3&units=metric","tls":"","persist":false,"proxy":"","authType":"","x":410,"y":580,"wires":[["eb0a3c5a.946b5"]]},{"id":"eb0a3c5a.946b5","type":"json","z":"71a09c7.42614e4","name":"","property":"payload","action":"","pretty":false,"x":610,"y":580,"wires":[["cb4daa69.38e858"]]},{"id":"cb4daa69.38e858","type":"change","z":"71a09c7.42614e4","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.main.temp","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":800,"y":580,"wires":[["881068aa.9d1a68"]]},{"id":"881068aa.9d1a68","type":"template","z":"71a09c7.42614e4","name":"payload em json","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"3{\"t\":\"{{payload}}\"}","output":"str","x":1000,"y":580,"wires":[["2da61512.41217a"]]},{"id":"2da61512.41217a","type":"mqtt out","z":"71a09c7.42614e4","name":"","topic":"iotamanager","qos":"0","retain":"false","broker":"553e4f2a.d90218","x":1210,"y":580,"wires":[]},{"id":"da7a87e2.aea2e","type":"mqtt out","z":"71a09c7.42614e4","name":"","topic":"iotamanager","qos":"0","retain":"false","broker":"553e4f2a.d90218","x":610,"y":520,"wires":[]},{"id":"d259858a.6f98e","type":"http request","z":"71a09c7.42614e4","name":"Temperatura SBC-centro","method":"GET","ret":"txt","paytoqs":"ignore","url":"http://api.openweathermap.org/data/2.5/weather?lat=-23.6766474&lon=-46.5568912&appid=c7f8bc1d2e8a77746581de0ac142c8b3&units=metric&mode=html","tls":"","persist":false,"proxy":"","authType":"","x":390,"y":720,"wires":[["2a906a3.d4f0e16"]]},{"id":"78c5aea.db433d","type":"debug","z":"71a09c7.42614e4","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":950,"y":960,"wires":[]},{"id":"2a906a3.d4f0e16","type":"html","z":"71a09c7.42614e4","name":"","property":"payload","outproperty":"payload","tag":"div","ret":"text","as":"single","x":590,"y":720,"wires":[["36c722f9.b44d9e"]]},{"id":"46a4df9.5487c2","type":"template","z":"71a09c7.42614e4","name":"payload em html","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"2<!DOCTYPE html><div title=\"Current Temperature\">{{payload}}</div>","output":"str","x":740,"y":940,"wires":[["78c5aea.db433d","b4b0e8e8.2d8d4"]]},{"id":"36c722f9.b44d9e","type":"change","z":"71a09c7.42614e4","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload[5]","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":820,"wires":[["46a4df9.5487c2"]]},{"id":"b4b0e8e8.2d8d4","type":"mqtt out","z":"71a09c7.42614e4","name":"","topic":"iotamanager","qos":"0","retain":"false","broker":"553e4f2a.d90218","x":950,"y":880,"wires":[]},{"id":"e88c0dbe.2a1d1","type":"template","z":"71a09c7.42614e4","name":"Payload aleatório","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"5{{payload}}","output":"str","x":390,"y":440,"wires":[["e8b3a7cf.bf1be8","da7a87e2.aea2e"]]},{"id":"e8b3a7cf.bf1be8","type":"debug","z":"71a09c7.42614e4","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":620,"y":460,"wires":[]},{"id":"b0475095.ce8fa","type":"debug","z":"71a09c7.42614e4","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":1110,"y":700,"wires":[]},{"id":"f1066a8.f370a98","type":"mqtt in","z":"71a09c7.42614e4","name":"","topic":"iotamanager","qos":"2","datatype":"auto","broker":"553e4f2a.d90218","x":910,"y":700,"wires":[["b0475095.ce8fa"]]},{"id":"c7ee0f90.b4bf38","type":"template","z":"71a09c7.42614e4","name":"payload em json","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"3{\"t\":\"{{payload}}\"}","output":"str","x":1400,"y":980,"wires":[[]]},{"id":"2893a590.4ca9d2","type":"template","z":"71a09c7.42614e4","name":"payload em json","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"3|{\"t\":\"{{payload}}\"}","output":"str","x":1440,"y":900,"wires":[[]]},{"id":"661e94b3.6a9afc","type":"random","z":"71a09c7.42614e4","name":"","outputs":"2","scope":"msg","x":1260,"y":920,"wires":[["2893a590.4ca9d2"],["c7ee0f90.b4bf38"]]},{"id":"8992bb46.6f734","type":"template","z":"71a09c7.42614e4","name":"Payload em XML","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"1<measure device=1 key=\"4jggokgpepnvsb2uv4s40d59ov\"><t value=\"{{payload}}\" />","output":"str","x":1030,"y":440,"wires":[[]]},{"id":"7e811280.867b9c","type":"inject","z":"71a09c7.42614e4","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":860,"y":440,"wires":[["8992bb46.6f734"]]},{"id":"768f1fcc.c5118","type":"debug","z":"71a09c7.42614e4","name":"Payload XML customizado","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":1280,"y":500,"wires":[]},{"id":"ad345f2f.0928f","type":"debug","z":"a5b0e0d9.2fe19","name":"broker 177_","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":650,"y":480,"wires":[]},{"id":"b3f13469.56c13","type":"mqtt out","z":"a5b0e0d9.2fe19","name":"","topic":"iotamanager","qos":"0","retain":"false","broker":"553e4f2a.d90218","x":650,"y":360,"wires":[]},{"id":"d149e01d.01bd6","type":"template","z":"a5b0e0d9.2fe19","name":"payload UL com |","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"4t|{{payload}}","output":"str","x":410,"y":440,"wires":[["ad345f2f.0928f","b3f13469.56c13"]]},{"id":"434d9478.0424e4","type":"debug","z":"a5b0e0d9.2fe19","name":"payload da mensagem","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":420,"y":280,"wires":[]},{"id":"80908ce6.a295a","type":"change","z":"a5b0e0d9.2fe19","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.main.temp","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":200,"y":340,"wires":[["434d9478.0424e4","d149e01d.01bd6"]]},{"id":"fb2dd336.3e3da","type":"json","z":"a5b0e0d9.2fe19","name":"","property":"payload","action":"","pretty":false,"x":150,"y":200,"wires":[["80908ce6.a295a","fbd725e4.8abdf8"]]},{"id":"fbd725e4.8abdf8","type":"debug","z":"a5b0e0d9.2fe19","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":410,"y":200,"wires":[]},{"id":"59c03e2e.b7643","type":"debug","z":"a5b0e0d9.2fe19","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":590,"y":80,"wires":[]},{"id":"61580e93.82f098","type":"http request","z":"a5b0e0d9.2fe19","name":"Temperatura UFABC-SBC","method":"GET","ret":"txt","paytoqs":"ignore","url":"http://api.openweathermap.org/data/2.5/weather?lat=-23.676992&lon=-46.563269&appid=c7f8bc1d2e8a77746581de0ac142c8b3&units=metric","tls":"","persist":false,"proxy":"","authType":"","x":330,"y":80,"wires":[["fb2dd336.3e3da","59c03e2e.b7643"]]},{"id":"8dc8f1d0.cbb2f","type":"inject","z":"a5b0e0d9.2fe19","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":"3","topic":"","payload":"","payloadType":"date","x":100,"y":80,"wires":[["61580e93.82f098"]]},{"id":"c84c1818.52bf28","type":"mqtt in","z":"a5b0e0d9.2fe19","name":"","topic":"iotamanager","qos":"2","datatype":"auto","broker":"553e4f2a.d90218","x":150,"y":500,"wires":[["bf0b20c3.414e08"]]},{"id":"bf0b20c3.414e08","type":"debug","z":"a5b0e0d9.2fe19","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":350,"y":500,"wires":[]},{"id":"bbcd5b88.92b48","type":"http request","z":"84c54e5e.9b6cc8","name":"Temperatura UFABC-SA","method":"GET","ret":"txt","paytoqs":"ignore","url":"http://api.openweathermap.org/data/2.5/weather?lat=-23.646310&lon=-46.527720&appid=c7f8bc1d2e8a77746581de0ac142c8b3&units=metric","tls":"","persist":false,"proxy":"","authType":"","x":170,"y":120,"wires":[["2d0c17eb.94709"]]},{"id":"2d0c17eb.94709","type":"json","z":"84c54e5e.9b6cc8","name":"","property":"payload","action":"","pretty":false,"x":170,"y":180,"wires":[["32b5f66a.6bf27a"]]},{"id":"32b5f66a.6bf27a","type":"change","z":"84c54e5e.9b6cc8","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"payload.main.temp","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":220,"y":280,"wires":[["fab6b8e3.c43138"]]},{"id":"fab6b8e3.c43138","type":"template","z":"84c54e5e.9b6cc8","name":"payload em json","field":"payload","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"3{\"t\":\"{{payload}}\"}","output":"str","x":240,"y":380,"wires":[["9d7a0672.6567b"]]},{"id":"9d7a0672.6567b","type":"mqtt out","z":"84c54e5e.9b6cc8","name":"","topic":"iotamanager","qos":"0","retain":"false","broker":"553e4f2a.d90218","x":510,"y":400,"wires":[]},{"id":"313cc70a.57ad08","type":"mqtt in","z":"84c54e5e.9b6cc8","name":"","topic":"iotamanager","qos":"2","datatype":"auto","broker":"553e4f2a.d90218","x":430,"y":140,"wires":[["3b6ca2ea.0428d6"]]},{"id":"3b6ca2ea.0428d6","type":"debug","z":"84c54e5e.9b6cc8","name":"","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","statusVal":"","statusType":"auto","x":610,"y":140,"wires":[]},{"id":"6e30d1d8.fac508","type":"inject","z":"84c54e5e.9b6cc8","name":"","props":[{"p":"payload"},{"p":"topic","vt":"str"}],"repeat":"","crontab":"","once":false,"onceDelay":"3","topic":"","payload":"","payloadType":"date","x":100,"y":40,"wires":[["bbcd5b88.92b48"]]}]
